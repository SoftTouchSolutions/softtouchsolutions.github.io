import{a as P,P as p,r as u,j as a}from"./mui-CVeSmhdP.js";import{m as B,i as z,t as W,d as H,u as K,b as O,N as _,A as Y,R as I,C as Q,j as X}from"./index-Cjmwo3Rz.js";import{S as Z}from"./index-B60750Cz.js";import{f as ee}from"./favicon1-BQmmPqiM.js";import{f as te}from"./favicon-DwWSk1cM.js";import{l as ae}from"./logo1-DW90zl1f.js";import{u as se}from"./16-Baksg-pw.js";import{E as J,P as T}from"./editprofile-DU6Bl2Mi.js";import{P as C}from"./data-DS0qhSfN.js";var re=["expand","className","cssModule","light","dark","fixed","sticky","color","container","tag","children"];function L(){return L=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},L.apply(this,arguments)}function A(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function ie(e,t){if(e==null)return{};var s=ne(e,t),r,n;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function ne(e,t){if(e==null)return{};var s={},r=Object.keys(e),n,l;for(l=0;l<r.length;l++)n=r[l],!(t.indexOf(n)>=0)&&(s[n]=e[n]);return s}var ce={children:p.node,className:p.string,color:p.string,container:p.oneOfType([p.bool,p.string]),cssModule:p.object,dark:p.bool,expand:p.oneOfType([p.bool,p.string]),fixed:p.string,light:p.bool,role:p.string,sticky:p.string,tag:W},oe=function(t){return t===!1?!1:t===!0||t==="xs"?"navbar-expand":"navbar-expand-".concat(t)};function le(e){var t,s=e.expand,r=s===void 0?!1:s,n=e.className,l=e.cssModule,y=e.light,m=e.dark,j=e.fixed,w=e.sticky,v=e.color,x=e.container,g=x===void 0?"fluid":x,N=e.tag,S=N===void 0?"nav":N,D=e.children,$=ie(e,re),E=B(z(n,"navbar",oe(r),(t={"navbar-light":y,"navbar-dark":m},A(t,"bg-".concat(v),v),A(t,"fixed-".concat(j),j),A(t,"sticky-".concat(w),w),t)),l),f=g&&g===!0?"container":"container-".concat(g);return P.createElement(S,L({},$,{className:E}),g?P.createElement("div",{className:f},D):D)}le.propTypes=ce;var de=["className","cssModule","children","tag"];function R(){return R=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},R.apply(this,arguments)}function G(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,r)}return s}function fe(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?G(Object(s),!0).forEach(function(r){pe(e,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):G(Object(s)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(s,r))})}return e}function pe(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function he(e,t){if(e==null)return{};var s=ue(e,t),r,n;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function ue(e,t){if(e==null)return{};var s={},r=Object.keys(e),n,l;for(l=0;l<r.length;l++)n=r[l],!(t.indexOf(n)>=0)&&(s[n]=e[n]);return s}var ge={className:p.string,cssModule:p.object,tag:W,type:p.string,children:p.node};function me(e){var t=e.className,s=e.cssModule,r=e.children,n=e.tag,l=n===void 0?"button":n,y=he(e,de),m=B(z(t,"navbar-toggler"),s);return P.createElement(l,R({"aria-label":"Toggle navigation"},fe({type:"button"},y),{className:m}),r||P.createElement("span",{className:B("navbar-toggler-icon",s)}))}me.propTypes=ge;const ve="/assets/logo-BjCkGc0t.svg",xe=()=>{const{menuItems:e,userType:t,isMenuLoaded:s}=H(),[r,n]=u.useState([]);return u.useEffect(()=>{if(console.log("[SIDEBAR] Menu context updated:",{menuItemsLength:(e==null?void 0:e.length)||0,userType:t,isMenuLoaded:s}),e&&Array.isArray(e)&&e.length>0){const m=JSON.parse(JSON.stringify(e));n(m),console.log("[SIDEBAR] Menu items updated in local state")}else s&&(!e||e.length===0)&&(n([]),console.log("[SIDEBAR] Menu is empty for current user role"))},[e,t,s]),{menuitems:r,setMenuitems:n,updateMenuItems:m=>{n([...m])},clearMenuActive:()=>{if(r&&r.length>0){const m=r.map(j=>{if(j.Items){const w=j.Items.map(v=>(v.active=!1,v.children&&(v.children=v.children.map(x=>(x.active=!1,x.children&&(x.children=x.children.map(g=>(g.active=!1,g.children&&(g.children=g.children.map(N=>(N.active=!1,N))),g))),x))),v));return{...j,Items:w}}return j});n(m)}},userType:t,isMenuLoaded:s}};let k=[];const Te=()=>{let e=K();const{menuitems:t,updateMenuItems:s,clearMenuActive:r,userType:n,isMenuLoaded:l}=xe(),[y,m]=u.useState(J.returnId()),[j,w]=u.useState({staff_name:"John Thomson",email:"",userType:"App Developer"});u.useEffect(()=>{k.push(e.pathname),k.length>2&&k.shift(),k[0]!==k[1]&&x();let f=document.querySelector(".main-content");return f.addEventListener("click",v),()=>{f.removeEventListener("click",v)}},[e]),u.useEffect(()=>{document.body.classList.contains("horizontal")&&window.innerWidth>=992&&N()},[]);function v(){document.body.classList.contains("horizontal")&&window.innerWidth>=992&&N()}u.useEffect(()=>{l&&t&&t.length>0&&(t.some(d=>d.Items&&d.Items.some(i=>i.active||i.selected))||x())},[l,e.pathname]),u.useEffect(()=>{console.log("[SIDEBAR DEBUG] Current user type:",n),console.log("[SIDEBAR DEBUG] Is menu loaded:",l),console.log("[SIDEBAR DEBUG] Menu items available:",(t==null?void 0:t.length)||0),t&&t.length>0?console.log("[SIDEBAR DEBUG] Menu structure:",t.map(f=>{var d,i;return{categoryItems:((d=f.Items)==null?void 0:d.length)||0,items:((i=f.Items)==null?void 0:i.map(o=>{var c;return{title:o.title,hasChildren:!!o.children,childrenCount:((c=o.children)==null?void 0:c.length)||0}}))||[]}})):console.log("[SIDEBAR DEBUG] No menu items found - check role-based filtering")},[n,l,t]),u.useEffect(()=>{const f=localStorage.getItem("auth_token")||sessionStorage.getItem("auth_token");console.log("[SIDEBAR DEBUG] Auth token exists:",!!f),console.log("[SIDEBAR DEBUG] Current location:",e.pathname)},[e]);function x(){if(!t||t.length===0)return;const f=JSON.parse(JSON.stringify(t));f.forEach(d=>{d.Items&&d.Items.forEach(i=>{i.active=!1,i.selected=!1,(e.pathname==="/dashtic/preview"||e.pathname==="/dashtic/preview/")&&(e.pathname="/dashboard/dashboard01/"),e.pathname===i.path+"/"&&(i.active=!0,i.selected=!0),i.children&&i.children.forEach(o=>{o.active=!1,o.selected=!1,e.pathname===o.path+"/"&&(i.active=!0,i.selected=!0,o.active=!0,o.selected=!0),o.children&&o.children.forEach(c=>{c.active=!1,c.selected=!1,e.pathname===c.path+"/"&&(i.active=!0,i.selected=!0,o.active=!0,o.selected=!0,c.active=!0,c.selected=!0)})})})}),s(f)}function g(f){if(!(!t||t.length===0)&&(!document.body.classList.contains("horizontalmenu-hover")||window.innerWidth<992)){const d=JSON.parse(JSON.stringify(t));f.active?d.forEach(i=>{i.Items&&i.Items.forEach(o=>{o.title===f.title&&(o.active=!o.active)})}):d.forEach(i=>{i.Items&&i.Items.forEach(o=>{o.active=!1,f.title===o.title&&(o.active=!0),o.children&&o.children.forEach(c=>{c.active=!1,f.title===c.title&&(o.active=!0,c.active=!0),c.children&&c.children.forEach(b=>{b.active=!1,f.title===b.title&&(o.active=!0,c.active=!0,b.active=!0),b.children&&b.children.forEach(h=>{h.active=!1,f.title===h.title&&(o.active=!0,c.active=!0,b.active=!0,h.active=!0)})})})})}),s(d)}}function N(){r()}function S(){document.querySelector(".app")&&document.querySelector(".app").classList.contains("sidenav-toggled")&&document.querySelector(".app").classList.add("sidenav-toggled-open")}function D(){document.querySelector(".app")&&document.querySelector(".app").classList.remove("sidenav-toggled-open")}const[$,E]=u.useState(se);return u.useEffect(()=>{(async()=>{try{const d=await Y.getCurrentUser();d&&d.data&&(d.data.profile_picture?E(`http://localhost:8000${d.data.profile_picture}?t=${new Date().getTime()}`):T.returnImage()!=null&&E(T.returnImage()),w({staff_name:d.data.staff_name||d.data.email||"John Thomson",email:d.data.email||"",userType:d.data.userType||"App Developer"}))}catch(d){console.error("Error loading user data:",d),T.returnImage()!=null&&E(T.returnImage()),m(J.returnId())}})()},[e]),l?a.jsx("div",{className:"sticky",children:a.jsxs("aside",{className:"app-sidebar sidebar-scroll",onMouseOver:()=>S(),onMouseOut:()=>D(),children:[a.jsxs("div",{className:"main-sidebar-header active",children:[a.jsx(O,{className:"desktop-logo logo-light active",to:"/dashboard/dashboard01",children:a.jsx("img",{src:ve,className:"main-logo",alt:"logo"})}),a.jsx(O,{className:"desktop-logo logo-dark active",to:"/dashboard/dashboard01",children:a.jsx("img",{src:ae,className:"main-logo",alt:"logo"})}),a.jsx(O,{className:"logo-icon mobile-logo icon-light active",to:"/dashboard/dashboard01",children:a.jsx("img",{src:te,alt:"logo"})}),a.jsx(O,{className:"logo-icon mobile-logo icon-dark active",to:"/dashboard/dashboard01",children:a.jsx("img",{src:ee,alt:"logo"})})]}),a.jsx(Z,{className:"sidebar-menuscroll",children:a.jsxs("div",{className:"main-sidemenu is-expanded",children:[a.jsx("div",{className:"app-sidebar__user",children:a.jsxs("div",{className:"dropdown user-pro-body text-center",children:[a.jsx("div",{className:"user-pic",children:a.jsx("img",{alt:"user-img",className:"avatar avatar-xl brround mb-1",src:$})}),a.jsxs("div",{className:"user-info text-center",children:[a.jsx("h5",{className:" mb-1 font-weight-bold",children:j.staff_name||`${y.firstName||"John"} ${y.lastName||"Thomson"}`}),a.jsx("span",{className:"text-muted app-sidebar__user-name text-sm",children:j.userType||y.role||"App Developer"})]})]})}),a.jsx("div",{className:"slide-left disabled",id:"slide-left",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"#7b8191",width:"24",height:"24",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M13.293 6.293 7.586 12l5.707 5.707 1.414-1.414L10.414 12l4.293-4.293z"})})}),a.jsx("ul",{className:"side-menu open",children:t.map((f,d)=>a.jsx(u.Fragment,{children:f.Items.map((i,o)=>a.jsxs("li",{className:`slide ${i.selected?"is-expanded":""}  ${i.active?"is-expanded":""}`,children:[i.type==="link"?a.jsxs(_,{to:i.path+"/",className:`side-menu__item ${i.selected?" active":""}`,children:[a.jsx("i",{className:`side-menu__icon fe fe-${i.icon}`}),a.jsx("span",{className:"side-menu__label",children:i.title}),i.badge?a.jsx("label",{className:i.badge,children:i.badgetxt}):""]}):"",i.type==="sub"?a.jsxs("a",{href:"javascript",onClick:c=>{c.preventDefault(),g(i)},className:`side-menu__item ${i.selected?"active is-expanded":""}`,children:[a.jsx("i",{className:`side-menu__icon fe fe-${i.icon}`}),a.jsx("span",{className:"side-menu__label",children:i.title}),a.jsx("i",{className:"angle fe fe-chevron-right"})]}):"",i.children?a.jsx("ul",{className:`slide-menu ${i.active?"open":""}`,style:i.active?{display:"block"}:{display:"none"},children:i.children.map((c,b)=>a.jsxs("li",{className:`sub-slide ${c.selected?"is-expanded":""} ${c.active?"is-expanded":""}`,children:[c.type==="sub"?a.jsxs("a",{href:"javascript",className:`slide-item ${c.selected?"active is-expanded":""}`,onClick:h=>{h.preventDefault(),g(c)},children:[c.title,c.active,a.jsx("i",{className:"sub-angle fe fe-chevron-right"})]}):"",c.type==="link"?a.jsx("span",{as:"li",children:a.jsxs(_,{to:c.path+"/",className:"slide-item",children:[c.title,c.active]})}):"",c.children?a.jsx("ul",{className:`sub-slide-menu ${c.selected?"open":""}`,style:c.active?{display:"block"}:{display:"none"},children:c.children.map((h,q)=>a.jsxs("li",{children:[h.type==="link"?a.jsxs(_,{to:h.path+"/",className:"sub-slide-item",children:[h.title,h.active]}):"",h.type==="sub"?a.jsxs("span",{as:"li",className:`sub-slide2 ${h.selected?"is-expanded":""} ${h.active?"is-expanded":""}`,children:[a.jsxs(_,{to:"#",className:"sub-slide-item",onClick:M=>{M.preventDefault(),g(h)},children:[h.title,h.active,a.jsx("i",{className:"sub-angle2 fe fe-chevron-down"})]}),c.children.map((M,F)=>a.jsx("ul",{className:`sub-slide-menu1 ${M.selected?"open":""}`,style:M.active?{display:"block"}:{display:"none"},children:c.children.map((U,V)=>a.jsx("li",{children:a.jsxs(_,{className:"sub-slide-item2",to:"#",children:[U.title,U.active]})},V))},F))]}):""]},q))}):""]},b))}):""]},o))},d+Math.random()*100))}),a.jsx("div",{className:"slide-right",id:"slide-right",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"#7b8191",width:"24",height:"24",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M10.707 17.707 16.414 12l-5.707-5.707-1.414 1.414L13.586 12l-4.293 4.293z"})})})]})})]})}):a.jsx("div",{className:"sticky",children:a.jsx("aside",{className:"app-sidebar sidebar-scroll"})})},Pe=()=>a.jsx(u.Fragment,{children:a.jsx("footer",{className:"footer",children:a.jsx("div",{className:"container",children:a.jsx(I,{className:"align-items-center flex-row-reverse",children:a.jsxs(Q,{md:"12",sm:"12",className:" mt-3 mt-lg-0 text-center",children:["Copyright Â© 2024 ",a.jsx(O,{to:"#",className:"text-primary",children:"Nshrmb"}),". Designed with ",a.jsx("span",{className:"fa fa-heart text-danger"}),a.jsx(O,{to:"#"})," All rights reserved."]})})})})}),Se=()=>{const[e,t]=u.useState("");u.useEffect(()=>{window.addEventListener("scroll",()=>{window.scrollY>100?t("d-block"):t("")})},[]);const s=()=>{window.scrollTo({top:10,behavior:"auto"})};return a.jsx("div",{children:a.jsx(O,{to:"#",id:"back-to-top",onClick:s,className:`${e}`,children:a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",children:[a.jsx("path",{d:"M0 0h24v24H0V0z",fill:"none"}),a.jsx("path",{d:"M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"})]})})})},je=C;function ye(e=je,t){const{type:s,payload:r}=t;switch(s){case"ADD_TO_CART":return e=C.filter(n=>n.id==r),[...e];case"PRODUCT":return e=C.filter(n=>n.id==r),e}}const $e=X({reducer:ye});export{Pe as F,le as N,Te as S,Se as T,me as a,ve as l,$e as s};
