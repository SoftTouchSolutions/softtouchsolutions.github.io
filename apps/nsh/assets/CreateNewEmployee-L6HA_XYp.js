import{r as c,j as e}from"./mui-CVeSmhdP.js";import{ab as C,a as E,f as D,R as u,C as a,g as S,n as _,h as k,F as w,L as t,I as r,B as F,A as N,S as j}from"./index-BH8F5Bwl.js";import{C as I}from"./CardTitle-DfjUI6oT.js";import"./vendor-CC_ZIGTP.js";import"./utils-ngrFHoWO.js";const H=()=>{const b=C(),d=E(),[s,p]=c.useState({title:"",firstname:"",lastname:"",gender:"",phonenumber:"",address:"",ethnicity:"",deptcode:"",managerID:"",job_role:"",contract_type:"",employment_date:"",branch:"",training:"",certification:"",skills:"",interests:"",status:!1}),[A,y]=c.useState(null),[g,T]=c.useState(!1),[f,m]=c.useState(!1);c.useEffect(()=>{(async()=>{try{await N.getCurrentUser()}catch(n){n.response&&n.response.status===401&&d("/login")}})()},[d]);const l=o=>{const{name:n,value:i,type:h,checked:x}=o.target;p({...s,[n]:h==="checkbox"?x:i})},v=async o=>{o.preventDefault(),y(null),m(!0);try{const i=["firstname","lastname","deptcode","job_role","contract_type"].filter(x=>!s[x]);if(i.length>0){m(!1),await j.fire({title:"Required Fields Missing",text:`Please fill in all required fields: ${i.join(", ")}`,icon:"warning",confirmButtonText:"OK"});return}console.log("Form data being submitted:",s);const h=await N.createEmployee(s,b);console.log("Create employee response:",h),m(!1),await j.fire({title:"Success",text:"Employee created successfully!",icon:"success",timer:2e3,showConfirmButton:!1}),p({title:"",firstname:"",lastname:"",gender:"",phonenumber:"",address:"",ethnicity:"",deptcode:"",managerID:"",job_role:"",contract_type:"",employment_date:"",branch:"",training:"",certification:"",skills:"",interests:"",status:!1}),d("/employee")}catch(n){console.error("Error creating employee:",n),m(!1),await j.fire({title:"Error",text:n.message||"Failed to create employee. Please try again.",icon:"error",confirmButtonText:"OK"})}};return e.jsxs("div",{children:[e.jsx(D,{title:"",home:"Home",name:"New",fonticonsname:"Emplyees"}),e.jsx(u,{children:e.jsx(a,{md:"12",xl:"12",children:e.jsxs(S,{children:[e.jsx(_,{children:e.jsx(I,{tag:"h3",children:"Add New Employee"})}),e.jsx(k,{children:e.jsxs(w,{onSubmit:v,children:[e.jsxs(u,{children:[e.jsx(a,{sm:"6",md:"6",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(t,{className:"form-label",children:"Title"}),e.jsx(r,{type:"text",name:"title",value:s.title,onChange:l,className:"form-control",placeholder:"Title"})]})}),e.jsx(a,{sm:"6",md:"6",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(t,{className:"form-label",children:"First Name"}),e.jsx(r,{type:"text",name:"firstname",value:s.firstname,onChange:l,className:"form-control",placeholder:"First Name"})]})}),e.jsx(a,{sm:"6",md:"6",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(t,{className:"form-label",children:"Last Name"}),e.jsx(r,{type:"text",name:"lastname",value:s.lastname,onChange:l,className:"form-control",placeholder:"Last Name"})]})}),e.jsx(a,{sm:"6",md:"6",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(t,{className:"form-label",children:"Gender"}),e.jsx(r,{type:"text",name:"gender",value:s.gender,onChange:l,className:"form-control",placeholder:"Gender"})]})}),e.jsx(a,{sm:"6",md:"6",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(t,{className:"form-label",children:"Phone Number"}),e.jsx(r,{type:"text",name:"phonenumber",value:s.phonenumber,onChange:l,className:"form-control",placeholder:"Phone Number"})]})}),e.jsx(a,{sm:"6",md:"6",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(t,{className:"form-label",children:"Address"}),e.jsx(r,{type:"text",name:"address",value:s.address,onChange:l,className:"form-control",placeholder:"Address"})]})}),e.jsx(a,{sm:"6",md:"6",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(t,{className:"form-label",children:"Ethnicity"}),e.jsx(r,{type:"text",name:"ethnicity",value:s.ethnicity,onChange:l,className:"form-control",placeholder:"Ethnicity"})]})}),e.jsx(a,{sm:"6",md:"6",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(t,{className:"form-label",children:"Department Code"}),e.jsx(r,{type:"text",name:"deptcode",value:s.deptcode,onChange:l,className:"form-control",placeholder:"Department Code"})]})}),e.jsx(a,{sm:"6",md:"6",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(t,{className:"form-label",children:"Manager ID"}),e.jsx(r,{type:"text",name:"managerID",value:s.managerID,onChange:l,className:"form-control",placeholder:"Manager ID"})]})}),e.jsx(a,{sm:"6",md:"6",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(t,{className:"form-label",children:"Job Role"}),e.jsx(r,{type:"text",name:"job_role",value:s.job_role,onChange:l,className:"form-control",placeholder:"Job Role"})]})}),e.jsx(a,{sm:"6",md:"6",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(t,{className:"form-label",children:"Contract Type"}),e.jsx(r,{type:"text",name:"contract_type",value:s.contract_type,onChange:l,className:"form-control",placeholder:"Contract Type"})]})}),e.jsx(a,{sm:"6",md:"6",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(t,{className:"form-label",children:"Employment Date"}),e.jsx(r,{type:"date",name:"employment_date",value:s.employment_date,onChange:l,className:"form-control",placeholder:"Employment Date"})]})}),e.jsx(a,{sm:"6",md:"6",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(t,{className:"form-label",children:"Branch"}),e.jsx(r,{type:"text",name:"branch",value:s.branch,onChange:l,className:"form-control",placeholder:"Branch"})]})}),e.jsx(a,{sm:"6",md:"6",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(t,{className:"form-label",children:"Training"}),e.jsx(r,{type:"text",name:"training",value:s.training,onChange:l,className:"form-control",placeholder:"Training"})]})}),e.jsx(a,{sm:"6",md:"6",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(t,{className:"form-label",children:"Certification"}),e.jsx(r,{type:"text",name:"certification",value:s.certification,onChange:l,className:"form-control",placeholder:"Certification"})]})}),e.jsx(a,{sm:"6",md:"6",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(t,{className:"form-label",children:"Skills"}),e.jsx(r,{type:"text",name:"skills",value:s.skills,onChange:l,className:"form-control",placeholder:"Skills"})]})}),e.jsx(a,{sm:"6",md:"6",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(t,{className:"form-label",children:"Interests"}),e.jsx(r,{type:"text",name:"interests",value:s.interests,onChange:l,className:"form-control",placeholder:"Interests"})]})}),e.jsx(a,{sm:"6",md:"6",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(t,{className:"form-label",children:"Status"}),e.jsx(r,{type:"checkbox",name:"status",checked:s.status,onChange:l,className:"form-check-input"}),e.jsx("span",{className:"ms-2",children:"Active"})]})})]}),e.jsx("div",{className:"form-footer mt-3",children:e.jsx(F,{color:"primary",type:"submit",disabled:f||g,children:f?"Creating...":"Add New Employee"})})]})})]})})})]})};export{H as default};
