import{r as s,j as e}from"./mui-CVeSmhdP.js";import{B as o,T as B,x as T,y as g,z as p,p as q,q as H,r as _,F as G,L as J,I as v,A as m}from"./index-BH8F5Bwl.js";import"./vendor-CC_ZIGTP.js";import"./utils-ngrFHoWO.js";const Y=()=>{const[a,l]=s.useState(!1),i=()=>l(!a),[n,S]=s.useState([]),[c,I]=s.useState(1),h=3,[N,f]=s.useState({criteriaName:""}),[y,P]=s.useState({}),[E,x]=s.useState(null),d=async()=>{try{const r=await m.getAllPcriteria();S(r||[])}catch(r){console.error("Error fetching criteria:",r)}};s.useEffect(()=>{d()},[]);const w=r=>{const{name:t,value:u}=r.target;f(C=>({...C,[t]:u}))},A=r=>{const{name:t,value:u}=r.target;P(C=>({...C,[t]:u}))},D=async r=>{r.preventDefault();try{await m.createPcriteria(N),d(),f({criteriaName:""}),i()}catch(t){console.error("Error adding criteria:",t)}},F=async r=>{r.preventDefault();try{await m.updatePcriteria(E,y),d(),x(null)}catch(t){console.error("Error updating criteria:",t)}},z=(r,t)=>{r.preventDefault(),x(t.sno),P({criteriaName:t.criteriaName})},M=()=>x(null),L=async r=>{try{await m.deletePcriteria(r),d()}catch(t){console.error("Error deleting criteria:",t)}},b=c*h,O=b-h,R=n.slice(O,b),k=Math.ceil(n.length/h),j=r=>I(r);return e.jsxs("div",{className:"app-container",children:[e.jsx(o,{color:"primary",className:"mb-3",onClick:i,children:"Add New Performance Criteria"}),e.jsxs(B,{bordered:!0,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Criteria Name"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:R.map(r=>e.jsx(s.Fragment,{children:E===r.sno?e.jsx(K,{editFormData:y,handleEditInputChange:A,handleEditFormSubmit:F,handleCancelClick:M}):e.jsx(Q,{crit:r,handleEditClick:z,handleDeleteClick:L})},r.sno))})]}),e.jsxs(T,{className:"pagination justify-content-end",children:[e.jsx(g,{disabled:c===1,children:e.jsx(p,{onClick:()=>j(c-1),children:"«"})}),[...Array(k)].map((r,t)=>e.jsx(g,{active:c===t+1,children:e.jsx(p,{onClick:()=>j(t+1),children:t+1})},t)),e.jsx(g,{disabled:c===k,children:e.jsx(p,{onClick:()=>j(c+1),children:"»"})})]}),e.jsxs(q,{isOpen:a,toggle:i,children:[e.jsx(H,{toggle:i,children:"Add New Performance Criteria"}),e.jsx(_,{children:e.jsxs(G,{onSubmit:D,children:[e.jsx(J,{for:"criteriaName",children:"Criteria Name"}),e.jsx(v,{type:"text",id:"criteriaName",name:"criteriaName",value:N.criteriaName,onChange:w,required:!0}),e.jsx(o,{color:"primary",className:"mt-3",type:"submit",children:"Add Criteria"})]})})]})]})},K=({editFormData:a,handleEditInputChange:l,handleEditFormSubmit:i,handleCancelClick:n})=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx(v,{type:"text",name:"criteriaName",value:a.criteriaName,onChange:l})}),e.jsxs("td",{children:[e.jsx(o,{size:"sm",color:"success",onClick:i,children:"Save"}),e.jsx(o,{size:"sm",color:"danger",onClick:n,className:"ms-2",children:"Cancel"})]})]}),Q=({crit:a,handleEditClick:l,handleDeleteClick:i})=>e.jsxs("tr",{children:[e.jsx("td",{children:a.criteriaName}),e.jsxs("td",{children:[e.jsx(o,{size:"sm",color:"warning",onClick:n=>l(n,a),className:"me-2",children:"Edit"}),e.jsx(o,{size:"sm",color:"danger",onClick:()=>i(a.sno),children:"Delete"})]})]});export{Y as default};
